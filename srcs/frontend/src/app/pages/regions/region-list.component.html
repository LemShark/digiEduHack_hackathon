<div class="grid cols-3" style="align-items:center">
	<h2 style="margin-top:0">Regions</h2>
	<div>
		<input
			class="input"
			type="search"
			placeholder="Search by name or address"
			[(ngModel)]="searchTerm"
			(ngModelChange)="onSearchTerm($event)"
		/>
	</div>
	<div style="display:flex;gap:8px;justify-content:flex-end">
		<select class="input" [(ngModel)]="sort" (ngModelChange)="onSortChange($event)">
			<option value="nameAsc">Name Aâ€“Z</option>
			<option value="nameDesc">Name Zâ€“A</option>
		</select>
		<a class="btn" routerLink="/regions/new" *ngIf="isGlobal()">+ Create Region</a>
	</div>
</div>
<div *ngIf="isLoading">Loadingâ€¦</div>
<div *ngIf="error" style="color:var(--danger)">{{ error }}</div>
<div class="grid cols-2" *ngIf="!isLoading && !error">
	<a class="card" *ngFor="let r of filteredRegions" [routerLink]="['/regions', r.id]">
		<div style="display:flex;align-items:center;justify-content:space-between">
			<div style="font-weight:600">{{ r.name }}</div>
			<button class="btn secondary" *ngIf="isGlobal()" (click)="$event.preventDefault(); viewAsRegion(r)" title="View as Region">
				ğŸ‘
			</button>
		</div>
		<div class="note">{{ r.address }}</div>
	</a>
	<div *ngIf="!filteredRegions.length" class="note">No regions</div>
</div>

