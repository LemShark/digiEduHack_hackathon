<a routerLink="/regions" class="btn secondary" title="Back to Regions" style="margin-bottom:16px">‚Üê Back to Regions</a>
<div *ngIf="isLoading">Loading‚Ä¶</div>
<div *ngIf="error" style="color:var(--danger)">{{ error }}</div>
<div *ngIf="region" class="card">
	<div class="card-header">
		<div>
			<div class="card-title">{{ region.name }}</div>
			<div class="card-subtitle">Region details</div>
		</div>
		<div>
			<button class="btn secondary" *ngIf="isGlobal() && !isEditing" (click)="enableEditing()" style="margin-right:8px">‚úèÔ∏è Edit</button>
			<button class="btn secondary" *ngIf="isGlobal() && !isEditing" (click)="viewAsRegion()" title="View as Region">üëÅ View as</button>
			<div *ngIf="isEditing" class="grid" style="grid-template-columns:auto auto; gap:8px">
				<button class="btn" [disabled]="form?.invalid || isSaving" (click)="save()">
					{{ isSaving ? 'Saving‚Ä¶' : 'Save changes' }}
				</button>
				<button class="btn outline" [disabled]="isSaving" (click)="cancelEditing()">Cancel</button>
			</div>
		</div>
	</div>

	<!-- Meta -->
	<div class="grid cols-3">
		<div>
			<div class="muted">Region ID</div>
			<div><code>{{ region.id }}</code></div>
		</div>
		<div>
			<div class="muted">Mode</div>
			<div><span class="badge" [class.primary]="isEditing">{{ isEditing ? 'Editing' : 'View' }}</span></div>
		</div>
	</div>
	<div class="spacer"></div>

	<!-- Details / Form -->
	<form *ngIf="form" [formGroup]="form" (ngSubmit)="save()">
		<div class="grid cols-2">
			<div>
				<h3>Basic Info</h3>
				<div class="grid">
					<label>
						<div class="muted">Name</div>
						<input class="input" formControlName="name" [readonly]="!isEditing" placeholder="Region name" />
					</label>
					<label>
						<div class="muted">Address</div>
						<input class="input" formControlName="address" [readonly]="!isEditing" placeholder="Address" />
					</label>
				</div>
			</div>
			<div>
				<h3>Contacts</h3>
				<div class="grid">
					<label>
						<div class="muted">Email</div>
						<input class="input" formControlName="contactEmail" [readonly]="!isEditing" placeholder="email@example.com" />
					</label>
					<label>
						<div class="muted">Phone</div>
						<input class="input" formControlName="contactPhone" [readonly]="!isEditing" placeholder="+1 555 0100" />
					</label>
				</div>
			</div>
		</div>
		<div *ngIf="isEditing" style="margin-top:12px">
			<button class="btn" type="submit" [disabled]="form?.invalid || isSaving">{{ isSaving ? 'Saving‚Ä¶' : 'Save changes' }}</button>
			<button class="btn ghost" type="button" [disabled]="isSaving" (click)="cancelEditing()">Cancel</button>
		</div>
	</form>
</div>

