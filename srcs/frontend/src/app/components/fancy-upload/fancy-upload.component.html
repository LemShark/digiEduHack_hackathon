<h2 style="margin-top:0">{{ scope === 'region' ? 'Regional' : 'School' }} Data Upload</h2>
<div class="card">
	<div class="grid cols-2">
		<label>
			<div>{{ scope === 'region' ? 'Region ID' : 'School ID' }}</div>
			<input class="input" [(ngModel)]="scopeId" [placeholder]="scope === 'region' ? 'e.g., r-1' : 'e.g., s-1'">
		</label>
		<div>
			<div>CSV File</div>
			<div class="dropzone" [class.drag-over]="dragOver"
				 (dragover)="onDragOver($event)"
				 (dragleave)="onDragLeave($event)"
				 (drop)="onDrop($event)"
				 (click)="fileInput.click()">
				<div *ngIf="!selectedFile">Drag & drop CSV here, or click to browse</div>
				<div *ngIf="selectedFile" class="file-chip">
					<span>{{ selectedFile.name }}</span>
					<span class="muted">{{ (selectedFile.size/1024 | number:'1.0-0') }} KB</span>
				</div>
				<input #fileInput type="file" accept=".csv" (change)="onFileInputChange($event)" hidden>
			</div>
		</div>
	</div>

	<div class="actions">
		<button class="btn" (click)="startUpload()" [disabled]="status==='uploading'">Upload</button>
		<button class="btn secondary" (click)="reset()" [disabled]="status==='uploading' && progress<100">Reset</button>
	</div>

	<div *ngIf="status==='uploading' || status==='success'" class="progress">
		<div class="bar" [style.width.%]="progress"></div>
	</div>

	<div *ngIf="status==='success'" class="success">
		<div class="badge primary">Success</div>
		<span>{{ message }}</span>
	</div>
	<div *ngIf="status==='error' && errors.length" class="errors">
		<div class="badge danger">Upload blocked</div>
		<ul>
			<li *ngFor="let e of errors">{{ e }}</li>
		</ul>
	</div>

	<div class="note">
		<strong>Tips:</strong> Use UTF-8 CSV, include header row, and avoid empty columns.
	</div>
</div>


